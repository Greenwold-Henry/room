!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=21)}([function(e,t,n){const r=n(1);e.exports=(e=>{r(e,"say")})},function(e,t,n){const r=n(2),o="undefined"!=typeof window;e.exports=o?(e,t)=>{for(let n of e.split("\n")){const e=document.createElement("div");e.innerHTML=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),t&&e.classList.add(t),e.classList.add("line");const r=document.getElementById("outputArea");r.appendChild(e),r.scrollTop=r.scrollHeight}}:(e,t="plain")=>{switch(t){case"say":console.log(r.yellow(e));break;case"title":console.log(r.yellowBright(e));break;case"roomName":console.log(r.green(e));break;case"plain":console.log(e);break;default:console.log(e)}}},function(e,t,n){"use strict";(function(t){const r=n(18),o=n(17),i=n(12),s=n(11),a="win32"===t.platform&&!(t.env.TERM||"").toLowerCase().startsWith("xterm"),l=["ansi","ansi","ansi256","ansi16m"],c=new Set(["gray"]),h=Object.create(null);function u(e,t){t=t||{};const n=i?i.level:0;e.level=void 0===t.level?n:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function f(e){if(!this||!(this instanceof f)||this.template){const t={};return u(t,e),t.template=function(){const e=[].slice.call(arguments);return function(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const n=[].slice.call(arguments,2),r=[t.raw[0]];for(let e=1;e<t.length;e++)r.push(String(n[e-1]).replace(/[{}\\]/g,"\\$&")),r.push(String(t.raw[e]));return s(e,r.join(""))}.apply(null,[t.template].concat(e))},Object.setPrototypeOf(t,f.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=f,t.template}u(this,e)}a&&(o.blue.open="[94m");for(const e of Object.keys(o))o[e].closeRe=new RegExp(r(o[e].close),"g"),h[e]={get(){const t=o[e];return g.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};h.visible={get(){return g.call(this,this._styles||[],!0,"visible")}},o.color.closeRe=new RegExp(r(o.color.close),"g");for(const e of Object.keys(o.color.ansi))c.has(e)||(h[e]={get(){const t=this.level;return function(){const n={open:o.color[l[t]][e].apply(null,arguments),close:o.color.close,closeRe:o.color.closeRe};return g.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}});o.bgColor.closeRe=new RegExp(r(o.bgColor.close),"g");for(const e of Object.keys(o.bgColor.ansi)){if(c.has(e))continue;h["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const t=this.level;return function(){const n={open:o.bgColor[l[t]][e].apply(null,arguments),close:o.bgColor.close,closeRe:o.bgColor.closeRe};return g.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}}}const p=Object.defineProperties(()=>{},h);function g(e,t,n){const r=function(){return function(){const e=arguments,t=e.length;let n=String(arguments[0]);if(0===t)return"";if(t>1)for(let r=1;r<t;r++)n+=" "+e[r];if(!this.enabled||this.level<=0||!n)return this._empty?"":n;const r=o.dim.open;a&&this.hasGrey&&(o.dim.open="");for(const e of this._styles.slice().reverse())n=(n=e.open+n.replace(e.closeRe,e.open)+e.close).replace(/\r?\n/g,`${e.close}$&${e.open}`);return o.dim.open=r,n}.apply(r,arguments)};r._styles=e,r._empty=t;const i=this;return Object.defineProperty(r,"level",{enumerable:!0,get:()=>i.level,set(e){i.level=e}}),Object.defineProperty(r,"enabled",{enumerable:!0,get:()=>i.enabled,set(e){i.enabled=e}}),r.hasGrey=this.hasGrey||"gray"===n||"grey"===n,r.__proto__=p,r}Object.defineProperties(f.prototype,h),e.exports=f(),e.exports.supportsColor=i,e.exports.default=e.exports}).call(this,n(19))},function(e,t){e.exports={fullname:function(e){switch(e){case"n":return"north";case"s":return"south";case"e":return"east";case"w":return"west";case"ne":return"northeast";case"se":return"southeast";case"sw":return"southwest";case"nw":return"northwest";case"u":return"up";case"d":return"down"}return e}}},function(e,t,n){var r=n(14),o={};for(var i in r)r.hasOwnProperty(i)&&(o[r[i]]=i);var s=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);if(!("labels"in s[a]))throw new Error("missing channel labels property: "+a);if(s[a].labels.length!==s[a].channels)throw new Error("channel and label counts mismatch: "+a);var l=s[a].channels,c=s[a].labels;delete s[a].channels,delete s[a].labels,Object.defineProperty(s[a],"channels",{value:l}),Object.defineProperty(s[a],"labels",{value:c})}s.rgb.hsl=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,s=Math.min(r,o,i),a=Math.max(r,o,i),l=a-s;return a===s?t=0:r===a?t=(o-i)/l:o===a?t=2+(i-r)/l:i===a&&(t=4+(r-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(s+a)/2,[t,100*(a===s?0:n<=.5?l/(a+s):l/(2-a-s)),100*n]},s.rgb.hsv=function(e){var t,n,r=e[0],o=e[1],i=e[2],s=Math.min(r,o,i),a=Math.max(r,o,i),l=a-s;return n=0===a?0:l/a*1e3/10,a===s?t=0:r===a?t=(o-i)/l:o===a?t=2+(i-r)/l:i===a&&(t=4+(r-o)/l),(t=Math.min(60*t,360))<0&&(t+=360),[t,n,a/255*1e3/10]},s.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[s.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},s.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,o=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-o)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]},s.rgb.keyword=function(e){var t=o[e];if(t)return t;var n,i,s,a=1/0;for(var l in r)if(r.hasOwnProperty(l)){var c=r[l],h=(i=e,s=c,Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)+Math.pow(i[2]-s[2],2));h<a&&(a=h,n=l)}return n},s.keyword.rgb=function(e){return r[e]},s.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},s.rgb.lab=function(e){var t=s.rgb.xyz(e),n=t[0],r=t[1],o=t[2];return r/=100,o/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},s.hsl.rgb=function(e){var t,n,r,o,i,s=e[0]/360,a=e[1]/100,l=e[2]/100;if(0===a)return[i=255*l,i,i];t=2*l-(n=l<.5?l*(1+a):l+a-l*a),o=[0,0,0];for(var c=0;c<3;c++)(r=s+1/3*-(c-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[c]=255*i;return o},s.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,o=n,i=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,o*=i<=1?i:2-i,[t,100*(0===r?2*o/(i+o):2*n/(r+n)),100*((r+n)/2)]},s.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),s=255*r*(1-n),a=255*r*(1-n*i),l=255*r*(1-n*(1-i));switch(r*=255,o){case 0:return[r,l,s];case 1:return[a,r,s];case 2:return[s,r,l];case 3:return[s,a,r];case 4:return[l,s,r];case 5:return[r,s,a]}},s.hsv.hsl=function(e){var t,n,r,o=e[0],i=e[1]/100,s=e[2]/100,a=Math.max(s,.01);return r=(2-i)*s,n=i*a,[o,100*(n=(n/=(t=(2-i)*a)<=1?t:2-t)||0),100*(r/=2)]},s.hwb.rgb=function(e){var t,n,r,o,i,s,a,l=e[0]/360,c=e[1]/100,h=e[2]/100,u=c+h;switch(u>1&&(c/=u,h/=u),n=1-h,r=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(r=1-r),o=c+r*(n-c),t){default:case 6:case 0:i=n,s=o,a=c;break;case 1:i=o,s=n,a=c;break;case 2:i=c,s=n,a=o;break;case 3:i=c,s=o,a=n;break;case 4:i=o,s=c,a=n;break;case 5:i=n,s=c,a=o}return[255*i,255*s,255*a]},s.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o))]},s.xyz.rgb=function(e){var t,n,r,o=e[0]/100,i=e[1]/100,s=e[2]/100;return n=-.9689*o+1.8758*i+.0415*s,r=.0557*o+-.204*i+1.057*s,t=(t=3.2406*o+-1.5372*i+-.4986*s)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},s.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},s.lab.xyz=function(e){var t,n,r,o=e[0],i=e[1],s=e[2];t=i/500+(n=(o+16)/116),r=n-s/200;var a=Math.pow(n,3),l=Math.pow(t,3),c=Math.pow(r,3);return n=a>.008856?a:(n-16/116)/7.787,t=l>.008856?l:(t-16/116)/7.787,r=c>.008856?c:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},s.lab.lch=function(e){var t,n=e[0],r=e[1],o=e[2];return(t=360*Math.atan2(o,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+o*o),t]},s.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},s.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],o=1 in arguments?arguments[1]:s.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===o&&(i+=60),i},s.hsv.ansi16=function(e){return s.rgb.ansi16(s.hsv.rgb(e),e[2])},s.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},s.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},s.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},s.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},s.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map(function(e){return e+e}).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},s.rgb.hcg=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,s=Math.max(Math.max(r,o),i),a=Math.min(Math.min(r,o),i),l=s-a;return t=l<1?a/(1-l):0,n=l<=0?0:s===r?(o-i)/l%6:s===o?2+(i-r)/l:4+(r-o)/l+4,n/=6,[360*(n%=1),100*l,100*t]},s.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,o=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(o=(n-.5*r)/(1-r)),[e[0],100*r,100*o]},s.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},s.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var o,i=[0,0,0],s=t%1*6,a=s%1,l=1-a;switch(Math.floor(s)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=l,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=l,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=l}return o=(1-n)*r,[255*(n*i[0]+o),255*(n*i[1]+o),255*(n*i[2]+o)]},s.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},s.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},s.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},s.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},s.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},s.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},s.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},s.gray.hsl=s.gray.hsv=function(e){return[0,0,e[0]]},s.gray.hwb=function(e){return[0,100,e[0]]},s.gray.cmyk=function(e){return[0,0,0,e[0]]},s.gray.lab=function(e){return[e[0],0,0]},s.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},s.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t,n){const r=n(0);e.exports={aliases:{rabbit:"bunny",lock:["box","code"],clipping:["news","newspaper","paper"],seeds:["packet","soil","bed","carrot seeds","seed"],hat:"magicians",read:["look","inspect"],move:["shove","push"],can:"watering",feed:["give"],insecticide:"cannister",nest:"hornets",set:"enter",put:["sprinkle","place"],coats:["rack","clothes"],rope:["knot"]},name:"Escape from Mr. Mysterio's Magic House",startingRoom:"Small Room",prologue:"Welcome to Escape from Mr. Mysterio's Magic House. Have fun on your magical adventure.",rooms:[{name:"Small Room",description:"Wow, this room is tiny. You can barely fit your legs in! There is a three-digit lock box fastened to the floor.",actions:[{phrase:["set lock to 241","set lock box to 241","set lock code to 241","put 241 in lock","enter 241 in lock"],action:(e,t)=>{t.unlocked||(t.unlocked=!0,r("The lock opens and reveals a bottle."),t.addThing({description:"a bottle",name:"bottle",actions:[{phrase:"read bottle",action:(e,t)=>{r('The bottle says "Magic dust"')}}]}))}}],things:[{description:"a newspaper clipping",name:"clipping",actions:[{phrase:"read clipping",action:(e,t)=>{r('The clipping says "Two for one!"')}}]}],exits:{w:{room:"Coat Room"}}},{name:"Coat Room",description:" This is a room where people put their clothes and belongings. A coat rack filled with many coats and other articles of clothing is in this room.",actions:[{phrase:"move coats",action:(e,t)=>{t.Pushed||(t.Pushed=!0,r("There is a magician's top hat."),t.addThing({description:"a magician's top hat",name:"hat",actions:[{phrase:"put dust hat",requiresThing:"bottle",action:(e,t)=>{"Stage Room"===t.name?(r("Poof! A magical bunny rabbit hops out of the hat and refuses to move."),t.addThing({description:"a bunny rabbit",name:"rabbit",gettable:!1}),e.self.destroyThing("bottle")):r("It creates a spark. Nothing else happens.")}}]}))}}],exits:{s:{room:"Shed"},e:{room:"Small Room"},se:{room:"Garden"}}},{name:"Shed",description:"This room is full of gardening tools. There is a doorway to the northwest that is blocked by a giant hornet's nest",things:[{description:"a packet of carrot seeds",name:"seeds"}],actions:[{phrase:["spray nest","spray insecticide","put insecticide nest"],requiresThing:"insecticide",action:(e,t)=>{t.sprayed?r("You already sprayed it."):(t.sprayed=!0,r("The hornets buzzing around the nest drop out of the air."),t.description="This room is full of gardening tools. There is a shriveled hornet's nest in the doorway to the northwest.",t.exits.nw.hidden=!1,t.exits.nw.blocked=!1)}}],exits:{nw:{room:"Hornets Nest",hidden:!0,blocked:!0},n:{room:"Coat Room"},s:{room:"Faucet Room"}}},{name:"Garden",description:"There is a big soil bed.",things:[{description:"an empty watering can",name:"can"}],actions:[{phrase:"plant seeds",requiresThing:"seeds",action:(e,t)=>{t.planted||(r("You plant the carrot seeds in rows in the soil bed."),t.planted=!0,e.self.destroyThing("seeds"))}},{phrase:"water seeds",requiresThing:"can",action:(e,t)=>{const n=e.self.inventory.can;n.full?t.planted?(r("You pour out the watering can onto the seeds."),t.watered=!0,n.full=!1,n.description="an empty watering can"):r("There are no seeds planted."):r("The can is empty.")}},{phrase:"wait",action:(e,t)=>{r("Time passes."),t.watered&&(r("A carrot pops its head out of the soil."),t.addThing({description:"a bright orange carrot",name:"carrot"}),t.watered=!1,t.planted=!1)}}],exits:{nw:{room:"Coat Room"},s:{room:"Stage Room"}}},{name:"Stage Room",description:"There are two big columns in the room. One of them has writing on it.",actions:[{phrase:"read column",action:(e,t)=>{r('The column says "Magic stage."')}},{phrase:["feed carrot to rabbit","feed rabbit the carrot"],requiresThing:"carrot",action:(e,t)=>{r("The bunny gobbles up the carrot in one bite. Now he will follow you anywhere!"),e.self.destroyThing("carrot");const n=t.findThing("rabbit");n.following=!0,e.onMove((e,t)=>{n.move(t)})}}],exits:{n:{room:"Garden"},e:{room:"Fancy Room"}}},{name:"Fancy Room",description:"A gold sliding door complete with ornate jewels blocks your path to the north. You notice that it is missing its largest central jewel.",things:[{description:"a pair of scissors",name:"scissors"}],actions:[{phrase:"put jewel in door",requiresThing:"jewel",action:(e,t)=>{r("The door slides to the right allowing access to a hidden room."),t.exits.n.hidden=!1,t.exits.n.blocked=!1,e.self.destroyThing("jewel"),t.description="A gold sliding door complete with ornate jewels is open."}}],exits:{n:{room:"Empty Room",blocked:!0,hidden:!0},w:{room:"Stage Room"}}},{name:"Empty Room",description:"A staircase leads down into the mist.",exits:{d:{room:"Ship Room"},s:{room:"Fancy Room"}}},{name:"Ship Room",description:"A ship is tied to a dock in the water. The knot that is holding it in place has become so old that it would be impossible to untie.",exits:{u:{room:"Empty Room"},n:{room:"Sea",hidden:!0,blocked:!0}},actions:[{phrase:["cut rope","cut rope with scissors"],requiresThing:"scissors",action:(e,t)=>{r("The ship is released, and you and your bunny friend sail off into the mist. You escaped from Mister Mysterio's Magic House."),t.exits.n.hidden=!1,t.exits.n.blocked=!1,e.self.destroyThing("scissors"),e.goToRoom("Sea")}}]},{name:"Sea",description:"You and your bunny friend are free on the open sea. Look for sharks!"},{name:"Faucet Room",description:"There is a sink with a leaky faucet here. To the south there is a small hole in the wall covered by a flap. It is too small for you to fit through.",actions:[{phrase:"fill can",requiresThing:"can",action:(e,t)=>{const n=e.self.inventory.can;n.full?r("The can is already full."):(r("You fill the can up from the faucet."),n.full=!0,n.description="a full watering can")}}],onEnter:[(e,t)=>{t.findThing("rabbit")&&!t.gotInsecticide&&(r("The bunny smells something interesting and runs through the flap. He returns with a cannister of insecticide"),t.gotInsecticide=!0,t.addThing({description:"a cannister of insecticide",name:"insecticide"}))}],exits:{n:{room:"Shed"}}},{name:"Hornets Nest",description:"The room is mostly empty.",things:[{description:"a large jewel",name:"jewel"}],exits:{se:{room:"Shed"}}}]}},function(e,t){e.exports={take:["get","grab"]}},function(e,t){e.exports=["a","at","an","and","go","the","this","in","intoset sr","on","to","exit","with"]},function(e,t,n){const r=n(0);e.exports=class{constructor(e,t={}){this.inventory=t||{},this.room=e}take(e){e.owner=this,this.inventory[e.name]=e,e.room.things=e.room.things.filter(t=>t.name!==e.name),e.room=void 0,r(`You took the ${e.name}.`)}destroyThing(e){if(this.has(e)){const t=this.inventory[e];t.owner=void 0,delete this.inventory[e],t.room=void 0}}drop(e){e.owner=void 0,delete this.inventory[e.name],this.room.things.push(e),e.room=this.room,r(`You dropped the ${e.name}.`)}reportInventory(){if(0!==Object.keys(this.inventory).length){r("You are carrying");for(let e of Object.values(this.inventory))r("  "+e.description)}else r("You have nothing.")}has(e){return void 0!==this.inventory[e]}}},function(e,t){e.exports=class{constructor({name:e,description:t=e,weight:n=0,gettable:r=!0,room:o,owner:i,actions:s=[]}){this.actions=s,this.name=e,this.weight=n,this.gettable=r,this.room=o,this.owner=i,this.description=t}move(e){this.room!==e&&(this.room.removeThing(this.name),this.room=e,e.things.push(this))}}},function(e,t,n){n(2);const r=n(3),o=n(9),i=n(1);e.exports=class{constructor({name:e,description:t,exits:n=[],things:r=[],actions:o=[],onEnter:i=[]}){this.name=e,this.description=t,this.exits=n;for(let e of Object.entries(this.exits))e[1].dir=e[0];this.actions=o,this.things=[];for(let e of r)this.addThing(e);Array.isArray(i)||(i=[i]),this.onEnter=i}addThing(e){this.things.push(new o({...e,room:this}))}removeThing(e){this.things=this.things.filter(t=>t.name!==e)}findThing(e){for(let t of this.things)if(t.name===e)return t}print(){i(""),i(this.name,"roomName"),i(this.description);for(let e of this.things)i(`There is ${e.description} here.`);if(this.exits){const e=[];for(let t of Object.values(this.exits))t.hidden||e.push(t);e.length>0&&(1===e.length?i(`There is an exit ${r.fullname(e[0].dir)}`):i(`There are exits in the following directions: ${e.map(e=>r.fullname(e.dir)).join(", ")}`))}}}},function(e,t,n){"use strict";const r=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,o=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,i=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,a=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function l(e){return"u"===e[0]&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):a.get(e)||e}function c(e,t){const n=[],r=t.trim().split(/\s*,\s*/g);let o;for(const t of r)if(isNaN(t)){if(!(o=t.match(i)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);n.push(o[2].replace(s,(e,t,n)=>t?l(t):n))}else n.push(Number(t));return n}function h(e,t){const n={};for(const e of t)for(const t of e.styles)n[t[0]]=e.inverse?null:t.slice(1);let r=e;for(const e of Object.keys(n))if(Array.isArray(n[e])){if(!(e in r))throw new Error(`Unknown Chalk style: ${e}`);r=n[e].length>0?r[e].apply(r,n[e]):r[e]}return r}e.exports=((e,t)=>{const n=[],i=[];let s=[];if(t.replace(r,(t,r,a,u,f,p)=>{if(r)s.push(l(r));else if(u){const t=s.join("");s=[],i.push(0===n.length?t:h(e,n)(t)),n.push({inverse:a,styles:function(e){o.lastIndex=0;const t=[];let n;for(;null!==(n=o.exec(e));){const e=n[1];if(n[2]){const r=c(e,n[2]);t.push([e].concat(r))}else t.push([e])}return t}(u)})}else if(f){if(0===n.length)throw new Error("Found extraneous } in Chalk template literal");i.push(h(e,n)(s.join(""))),s=[],n.pop()}else s.push(p)}),i.push(s.join("")),n.length>0){const e=`Chalk template literal is missing ${n.length} closing bracket${1===n.length?"":"s"} (\`}\`)`;throw new Error(e)}return i.join("")})},function(e,t,n){"use strict";e.exports=!1},function(e,t,n){var r=n(4);function o(e){var t=function(){for(var e={},t=Object.keys(r),n=t.length,o=0;o<n;o++)e[t[o]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var o=n.pop(),i=Object.keys(r[o]),s=i.length,a=0;a<s;a++){var l=i[a],c=t[l];-1===c.distance&&(c.distance=t[o].distance+1,c.parent=o,n.unshift(l))}return t}function i(e,t){return function(n){return t(e(n))}}function s(e,t){for(var n=[t[e].parent,e],o=r[t[e].parent][e],s=t[e].parent;t[s].parent;)n.unshift(t[s].parent),o=i(r[t[s].parent][s],o),s=t[s].parent;return o.conversion=n,o}e.exports=function(e){for(var t=o(e),n={},r=Object.keys(t),i=r.length,a=0;a<i;a++){var l=r[a];null!==t[l].parent&&(n[l]=s(l,t))}return n}},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){var r=n(4),o=n(13),i={};Object.keys(r).forEach(function(e){i[e]={},Object.defineProperty(i[e],"channels",{value:r[e].channels}),Object.defineProperty(i[e],"labels",{value:r[e].labels});var t=o(e);Object.keys(t).forEach(function(n){var r=t[n];i[e][n]=function(e){var t=function(t){if(void 0===t||null===t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,o=0;o<r;o++)n[o]=Math.round(n[o]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),i[e][n].raw=function(e){var t=function(t){return void 0===t||null===t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)})}),e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";(function(e){const t=n(15),r=(e,n)=>(function(){return`[${e.apply(t,arguments)+n}m`}),o=(e,n)=>(function(){const r=e.apply(t,arguments);return`[${38+n};5;${r}m`}),i=(e,n)=>(function(){const r=e.apply(t,arguments);return`[${38+n};2;${r[0]};${r[1]};${r[2]}m`});Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,n={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};n.color.grey=n.color.gray;for(const t of Object.keys(n)){const r=n[t];for(const t of Object.keys(r)){const o=r[t];n[t]={open:`[${o[0]}m`,close:`[${o[1]}m`},r[t]=n[t],e.set(o[0],o[1])}Object.defineProperty(n,t,{value:r,enumerable:!1}),Object.defineProperty(n,"codes",{value:e,enumerable:!1})}const s=(e,t,n)=>[e,t,n];n.color.close="[39m",n.bgColor.close="[49m",n.color.ansi={},n.color.ansi256={},n.color.ansi16m={rgb:i(s,0)},n.bgColor.ansi={},n.bgColor.ansi256={},n.bgColor.ansi16m={rgb:i(s,10)};for(const e of Object.keys(t)){if("object"!=typeof t[e])continue;const s=t[e];"ansi16"in s&&(n.color.ansi[e]=r(s.ansi16,0),n.bgColor.ansi[e]=r(s.ansi16,10)),"ansi256"in s&&(n.color.ansi256[e]=o(s.ansi256,0),n.bgColor.ansi256[e]=o(s.ansi256,10)),"rgb"in s&&(n.color.ansi16m[e]=i(s.rgb,0),n.bgColor.ansi16m[e]=i(s.rgb,10))}return n}})}).call(this,n(16)(e))},function(e,t,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,c=[],h=!1,u=-1;function f(){h&&l&&(h=!1,l.length?c=l.concat(c):u=-1,c.length&&p())}function p(){if(!h){var e=a(f);h=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function d(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new g(e,t)),1!==c.length||h||a(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){const r=n(2),o=n(10),i=n(8),s=n(0),a=n(1),l=n(3),c=n(7),h=n(6);function u(e){return Array.isArray(e)?e:[e]}function f(){}function p(e,t){return e=(e=function(e,t){return e.split(" ").map(e=>t[e]||e).join(" ")}(e=(e=function(e){const t={};for(let e of c)t[e]=!0;return e.split(" ").filter(e=>!t[e]).join(" ")}(e=(e=e.toLowerCase().trim()).replace(/\W+/g," "))).replace(/\W+/g," "),t)).replace(/\W+/g," ")}function f(e,t,n,r){const o=u(e.phrase);for(let i of o)if(t===p(i,n.aliases)){if(e.requiresThing){const t=u(e.requiresThing);for(let e of t)if(!n.self.has(e))return s("You don't have that."),!0}return e.action(n,r),!0}return!1}e.exports=class{constructor(e){this.rooms={};for(let t of e.rooms)this.rooms[t.name]=new o(t);this.startingRoom=e.startingRoom,this.prologue=e.prologue,this.name=e.name,this.room=this.rooms[this.startingRoom],this.self=new i(this.room),this.onMoveCallbacks=[],this.aliases={},this.prepareAliases(h),this.prepareAliases(e.aliases),this.validateDirections()}start(){a(this.name,"title"),a(this.prologue)}onMove(e){this.onMoveCallbacks.push(e)}validateDirections(){for(let e of Object.values(this.rooms))if(e.exits){let t=Object.values(e.exits);for(let n of t)if(!this.rooms[n.room])throw r.red(`Error! Room: ${e.name} has an exit to a nonexistent room ${n.room}`)}}prepareAliases(e){if(e)for(let t of Object.keys(e)){let n=u(e[t]);for(let e of n)this.aliases[e]=t}}goToRoom(e){this.room=this.rooms[e],this.self.room=this.room}parseInput(e,t){e=p(e,this.aliases);let n=Object.values(t.exits);if(!n||0===n.length)return void s("You are trapped!");for(let t of n)if(!t.blocked&&(e===t.dir||e===l.fullname(t.dir))){this.room=this.rooms[t.room],this.self.room=this.room;for(let e of this.onMoveCallbacks)e(this,this.room);for(let e of this.room.onEnter)e(this,this.room);return}for(let n of t.actions||[])if(f(n,e,this,t))return;for(let n of Object.values(this.self.inventory))for(let r of n.actions||[])if(f(r,e,this,t))return;if("i"===e||"inventory"===e)return void this.self.reportInventory();const r=e.split(" ");if("take"!==r[0])if("drop"!==r[0])s("You can't do that.");else{for(let e of Object.values(this.self.inventory))if(e.name===r[1])return void this.self.drop(e);s(`You have no ${r[1]}.`)}else{for(let e of t.things)if(e.name===r[1])return e.gettable?void this.self.take(e):void s(`You can't take the ${e.name}.`);s("You can't take that.")}}}},function(e,t,n){const r=new(n(20))(n(5));r.start(),r.room.print(),document.getElementById("gameTitle").innerHTML=r.name,window.onUserInput=(e=>{r.parseInput(e,r.room),r.room.print()})}]);